---
title: "pre_lab_01.Rmd"
author: "Molecule Jongwilai"
date: "2024-09-04"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(scipen=999)
```

## About this notebook

This notebook contains code and explanatory text that your should review and run as you read through chapters 1 - 5 of the course textbook, "Data Journalism with R and the Tidyverse". Answer questions and edit the document as directed.

Running this notebook will help you understand key data analysis methods and concepts that you will put into practice during this week's lab. When you come across a new command or verb in R, you should add it to your class reference notebook file along with what it's used for.

When you are finished running the code in this notebook, you will push changes to your course GitHub repo, and upload the link to ELMS as instructed.

You also should update your class reference notebook with code examples and what they mean. When you come across a new concept or R verb, put it in your reference notebook along with a sentence about what it does. For example:

```{r}
library(tidyverse)
library(lubridate)
```

The library function loads an R library such as the tidyverse, providing access to the verbs and functions that library contains. You have to load a library before you can use its functions.

## Chapter 3

### Task 1: The console

**Task** In the console (look below), type 2+2 and hit enter. What does it return? Type your answer below. **Answer:**

### Task 2: Variables

**Task** Put the following code -- which stores the numeral 2 as a variable called number -- in the console and hit enter.

```{r}
number <- 2
```

Then type this code to multiply the variable called number by itself.

```{r}
number * number
```

What does it return? Type your answer below:

**Answer:** 4

### Task 3: Install packages

**Task** In the console, run the following code to install the Tidyverse:

```{r}
install.packages('tidyverse')
```

**Task** Add that

Then run the following code to install the rmarkdown library

```{r}
install.packages('rmarkdown')
```

## Chapter 6

### Task 1: Load libraries

**Task** Run the following code in the gray-colored codeblock below -- not in the console -- to load the tidyverse library. To run the code, click the little green play button (left facing arrow) at the top right of the codeblock. In Rmarkdown data notebooks, we write code inside of codeblocks, and explanatory text in the white area outside of it.

```{r}
# This is a comment inside of a codeblock. Comments doesn't run when we run the codeblock.
# Adding this command is a good way to start your class reference notebook.
library(tidyverse)
```

### Task 2: Load data

**Task** Load the Maryland WinRed contributions dataset by running the following codeblock.

```{r}
maryland_winred_contributions <- read_rds("pre_lab_01.rds")
```

Once it loads, look at the environment window at right in RStudio for maryland_winred_contributions. It's next to a small blue circle with a white arrow in it. To the right of that, look at how many "obs" the dataset has ("obs" is short for observation, which is another way of saying rows or records). Look at how many variables it has (another way of saying columns or fields). Write the number of observations and variables below.

**Answer**
Observation = 131,395
Variables = 24 

### Task 3: Glimpse data

**Task** Run the following codeblock to use glimpse() to get a sense of the data, some of the values in each field/variable/column, and the data types of each field/variable/column.

```{r}
glimpse(maryland_winred_contributions)
```

In the space below, write the data type for the "last_name" column and the "amount" columns (it's in light gray, offset by \< \>). Also offer your best guess as to what the "last_name" column and the "amount" column represent. 
**Answer**
- The data type of "last_name" is the character, representing the donors' last name. 
- The data type of "amount" is a number, representing the amount of money that each donor donates.  

### Task 4: Examine data "head"

**Task** Run the following codeblock to use head() to examine the first six rows of data. Explore the data by clicking the black arrow on the right side of the output table, allowing you to examine additional columns.

```{r}
head(maryland_winred_contributions)
```

In the space below, write the first and last name from the _second_ row of the data. 
**Answer**
Peggy Mukai

### Task 5: Explore data with interactive dataframe

**Task** look at the environment window at right in RStudio for maryland_winred_contributions It's next to a small blue circle with a white arrow in it. Click on the maryland_winred_contributions -- not the blue circle. It will open the dataframe as an interactive table. Scroll down to see additional rows. Scroll left to see additional columns. Click on a column name to sort by that column.

### Task 6: Group and count

**Task** Run the following codeblock:

```{r}
maryland_winred_contributions |>
  group_by(date) |>
  summarise(
    count_contribs = n()
  )
```

Describe what you think this code is doing below. What does the answer represent, compared to the results from `head()`?

**Answer**
The code categorizes data in each row into a unique group of date and counts the number of row that falls into each group. The answer represents the number of donations that happened on each specific date while the results from 'head()' just demonstrate the first six rows of the original dataset without any additional info or insights.  

### Task 7: Adding arrange()

**Task** Run the following codeblock:

```{r}
maryland_winred_contributions |>
  group_by(date) |>
  summarise(
    count_contribs = n()
  ) |>
  arrange(desc(count_contribs))
```

Compared to the previous codeblock, what has changed and how did that affect the result?

**Answer**
This coedblock has added one more line, 'arrange(desc(count_contribs)', at the end of the original code. As a result, The order of the rows has changed as the code has arranged the values in the 'count_contribs' column from max to min. This also has affected the values in the 'date' column by shuffling the date that has the most donations at the top followed by the second most and so on.     

### Task 8: Multiple grouping

**Task** Run the following codeblock.

```{r}
maryland_winred_contributions |>
  group_by(memo_text, amount) |>
  summarise(
    count_contribs = n()
  ) |>
  arrange(desc(count_contribs))
```

Compared to the previous codeblock, what has changed and how did that affect the result?

**Answer**
Compared to the previous codecblock, this codeblock has changed the column that has been used as the filter to categorize data from 'date' to 'memo_text' and 'amount'. As a result, firstly, the code has categorized data in each row into a unique group of 'memo_text'. Secondly, within each group of 'memo_text', the code has categorized data into a unique group of the 'amount' and has counted the number of rows that fall into each group.    

### Task 9

**Task** Run the following codeblock:

```{r}
maryland_winred_contributions |>
  group_by(memo_text) |>
  summarise(
    count_contribs = n(),
    total_amount = sum(amount)
  ) |>
  arrange(desc(total_amount))
```

Compared to the previous codeblock, what has changed and how did that affect the result? 

**Answer**
This codeblock has added a line 'total_amount = sum(amount)' followed by the line 'count_contribs = n()' in the previous codeblock. As a result, One more column, 'total_amount', has appeared showing the sum of all of the numeric values from the 'amount' column that has been categorized into each group of 'memo_text'.

### Task 10: More descriptive statistics

**Task** Run the following codeblock to group the maryland_winred_contributions dataframe by the recipient for each contribution. Then do the following summarizations for each group:count the number of contributions, add up the value of all contributions, and calculate the mean and median contribution amounts. Then sort so the recipient with the most contributions is listed first.

```{r}
maryland_winred_contributions |>
  group_by(memo_text) |>
  summarise(
    count_contribs = n(),
    total_amount = sum(amount),
    mean_amount = mean(amount),
    median_amount = median(amount)
  ) |>
  arrange(desc(count_contribs))
```

Compared to the previous codeblock, what has changed and how did that affect the result? Glancing at the names, which of the top results from Maryland?

**Answer**
- This codeblock has added 2 lines, 'mean_amount = mean(amount)' and 'median_amount = median(amount), followed by the line 'total_amount = sum(amount)' in the previous codeblock. As a result, Two more columns, 'mean_amout' and 'media_amount', have appeared showing the mean and median of the numeric values from the 'amount' column that has been categorized into each group of 'memo_text'. 
- The top recipient is TRUMP NATIONAL COMMITTEE JFC, INC.

### Task 11

**Task** Run the following codeblock to group the maryland_winred_contributions dataframe by the city for each contribution. Then do the following summarizations for each group:count the number of contributions, add up the value of all contributions, calculate the mean and median contributions amounts and calculate the smallest and largest contributions Then sort so the city with the largest total contribution amount is listed first.

```{r}
maryland_winred_contributions |>
  group_by(city) |>
  summarise(
    count_contribs = n(),
    total_amount = sum(amount),
    mean_amount = mean(amount),
    median_amount = median(amount),
    min_amount = min(amount),
    max_amount = max(amount)
  ) |>
  arrange(desc(total_amount))
```

Compared to the previous codeblock, what has changed and how did that affect the result? How is the data sorted? **Answer**
Compared to the previous codecblock; 
- this codeblock has used 'city' as a criterion to group data instead of using 'memo_text'
- in the summarize function section, there have been 2 additional lines ordering code to find a min and a max of values from the 'amount'
- instead of arranging values from the 'count_contribs', this codeblock has written code to arrange values from 'total_amount'. 

As a result, the new spreadsheet has appeared demonstrating;
- data categorized by 'city' and arranged by values in the 'total amount' in descending order
- the columns demonstrating the sum, mean, median, min, and max of the numeric values in the 'amount' from the rows that fall into each group of cities.